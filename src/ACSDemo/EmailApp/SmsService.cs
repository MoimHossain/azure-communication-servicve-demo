using Azure;
using Azure.Communication.Sms;

namespace EmailApp
{
    public class SmsService
    {
        public static async Task SendSmsAsync(string? connectionString)
        {
            SmsClient smsClient = new(connectionString);

            try
            {
                SmsSendResult sendResult = smsClient.Send(
                    from: "MOIMHA",
                    to: "+316XXXXX",
                    message: "Hello World via SMS"
                );

                await Task.CompletedTask;

                Console.WriteLine($"Sms id: {sendResult.MessageId}");
            }
            catch (RequestFailedException ex)
            {
                /// OperationID is contained in the exception message and can be used for troubleshooting purposes
                Console.WriteLine($"SMS send operation failed with error code: {ex.ErrorCode}, message: {ex.Message}");
            }
        }
    }
}
